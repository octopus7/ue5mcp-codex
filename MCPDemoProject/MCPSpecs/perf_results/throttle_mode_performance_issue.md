# 스로틀 모드로 인한 MCP 퍼포먼스 이상

## 요약
- 에디터가 백그라운드 상태일 때 CPU 스로틀이 활성화되며, MCP 요청 지연이 비정상적으로 커진다.
- 핵심 원인은 전송 방식(HTTP/Named Pipe)보다 **에디터 프레임 제한 모드**다.

## 관찰된 증상
- HTTP 요청이 약 `~333ms` 근처로 반복적으로 느리게 측정됨.
- Named Pipe 요청은 `빠름/느림`이 번갈아 나타나지만, 느린 구간은 동일하게 프레임 경계 지연 영향을 받음.

## 원인
- Unreal Editor가 백그라운드일 때 `bThrottleCPUWhenNotForeground` 설정에 의해 Tick이 크게 제한된다.
- 이 상태에서는 실질적으로 저 FPS(예: 약 3 FPS)로 동작해 요청 처리 타이밍이 프레임 경계에 묶인다.
- 결과적으로 요청 완료 시간이 `~333ms` 단위로 보이거나, 프레임 타이밍에 따라 교대 패턴이 발생한다.

## 왜 전송 방식 문제처럼 보였나
- HTTP는 요청이 프레임 경계를 놓치면 거의 고정된 지연처럼 보인다.
- Named Pipe는 호출 시점이 프레임 경계와 맞으면 매우 빠르고, 놓치면 느려져 교대 패턴처럼 보인다.
- 즉, 둘 다 공통 병목은 에디터 Tick 주기다.

## 재현 조건
- 에디터를 백그라운드로 둔 상태에서 MCP 요청 반복 측정.
- 특히 단건 요청을 연속으로 보내면 프레임 경계 영향이 통계에 그대로 반영됨.

## 대응 방법
- 측정 시 에디터를 포그라운드로 유지.
- `Editor Preferences > Performance > Use Less CPU when in Background` 비활성화.
- 필요 시 설정값(`bThrottleCPUWhenNotForeground`)을 프로젝트/사용자 설정에서 관리.

## 결론
- 이번 퍼포먼스 이상은 MCP 자체 오버헤드보다 **에디터 백그라운드 스로틀 모드**의 영향이 지배적이다.
